spring.application.name=KLTN

# ============================================
# DATABASE CONFIGURATION
# ============================================
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/KLTN?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:123456}

# ============================================
# SERVER CONFIGURATION
# ============================================
server.port=${SERVER_PORT:8081}
server.public-url=${SERVER_PUBLIC_URL:http://localhost:8081}
# Tăng buffer size để xử lý response lớn
server.tomcat.max-http-post-size=10MB
server.tomcat.max-swallow-size=10MB
# Tắt compression để tránh lỗi chunked encoding (có thể bật lại nếu cần)
server.compression.enabled=false

# ============================================
# JPA/HIBERNATE CONFIGURATION
# ============================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# ============================================
# JACKSON CONFIGURATION
# ============================================
# Cấu hình Jackson để hỗ trợ Java 8 date/time
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:DEBUG}

# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ============================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=1GB
app.upload.dir=${UPLOAD_DIR:uploads}

# ============================================
# VNPAY CONFIGURATION
# ============================================
vnpay.tmnCode=${VNPAY_TMN_CODE:}
vnpay.hashSecret=${VNPAY_HASH_SECRET:}
vnpay.url.pay=${VNPAY_URL_PAY:https://sandbox.vnpayment.vn/paymentv2/vpcpay.html}
vnpay.url.api=${VNPAY_URL_API:https://sandbox.vnpayment.vn/merchant_webapi/api/transaction}
vnpay.version=${VNPAY_VERSION:2.1.0}
vnpay.command=${VNPAY_COMMAND:pay}
vnpay.currency=${VNPAY_CURRENCY:VND}
vnpay.locale=${VNPAY_LOCALE:vn}
vnpay.returnUrl=${VNPAY_RETURN_URL:http://localhost:8081/api/vnpay/return}

# ============================================
# OAUTH2 GOOGLE CONFIGURATION
# ============================================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:}
spring.security.oauth2.client.registration.google.scope=openid,email,profile
spring.security.oauth2.client.registration.google.client-name=Google
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

# ============================================
# FRONTEND URL CONFIGURATION
# ============================================
app.frontend.url=${FRONTEND_URL:http://localhost:3000}

# ============================================
# OPENAI API CONFIGURATION
# ============================================
openai.api.key=${OPENAI_API_KEY:}

# ============================================
# GOOGLE MAPS API CONFIGURATION
# ============================================
google.maps.api.key=${GOOGLE_MAPS_API_KEY:}

# ============================================
# JWT SECRET (nếu có)
# ============================================
# jwt.secret=${JWT_SECRET:your-secret-key-here}
